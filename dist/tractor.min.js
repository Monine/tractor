!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.Tractor=r():t.Tractor=r()}(this,function(){return function(t){function r(e){if(s[e])return s[e].exports;var o=s[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var s={};return r.m=t,r.c=s,r.d=function(t,s,e){r.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:e})},r.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(s,"a",s),s},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=0)}([function(t,r,s){"use strict";function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function o(t,r){function s(o){e||(e=o);var l=this.translate-this.translate*(o-e)/t;l<r&&(l=this.translate=r),n(this.scroller,"translate3d(0, "+l+"px, 0)"),l>r&&window.requestAnimationFrame(s.bind(this))}window.requestAnimationFrame(s.bind(this));var e=0}function n(t,r){var s=t.style;s.webkitTransform=s.MozTransform=s.transform=r}var l=function(){function t(t,r){for(var s=0;s<r.length;s++){var e=r[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(r,s,e){return s&&t(r.prototype,s),e&&t(r,e),r}}(),i="tractor-touching",a="tractor-less",c="tractor-greater",h="tractor-refreshing",d=function(){function t(r){e(this,t),Object.assign(this,{scroller:"body",enableDragLoading:!1,enableScrollLoading:!1,avoidHorizontalSliding:!1,dragThreshold:40,scrollThreshold:40,onDragStart:null,onDragLessThreshold:null,onDragGreaterThreshold:null,onDragDone:null,onScrollToThreshold:null},r),this.translate=0,this.scrollerLoading=!1,this.scroller=document.querySelector(this.scroller),this.enableDragLoading&&t._initDrag.call(this),this.enableScrollLoading&&t._initScroll.call(this)}return l(t,null,[{key:"_initDrag",value:function(){function t(t){this.scroller.scrollTop<=0&&(e=!0,u=t.changedTouches[0].pageX,f=t.changedTouches[0].pageY)}function r(t){if(e){var r=t.changedTouches[0].pageY-f;if(r>0?this.translate=Math.pow(r,.85):0!==this.translate&&(this.translate=0,n(this.scroller,"translate3d(0, "+this.translate+"px, 0)")),this.avoidHorizontalSliding){if(Math.abs(t.touches[0].pageX-u)-Math.abs(t.touches[0].pageY-f)>0)return!1}r>0&&(t.preventDefault(),this.scroller.classList.add(i),l||(l=!0,this.onDragStart&&this.onDragStart()),this.translate<=this.dragThreshold?(this.scroller.classList.contains(c)&&this.scroller.classList.remove(c),this.scroller.classList.contains(a)||this.scroller.classList.add(a),d||(d=!d,this.onDragLessThreshold&&this.onDragLessThreshold())):(this.scroller.classList.contains(a)&&this.scroller.classList.remove(a),this.scroller.classList.contains(c)||this.scroller.classList.add(c),d&&(d=!d,this.onDragGreaterThreshold())),n(this.scroller,"translate3d(0, "+this.translate+"px, 0)"))}}function s(t){e&&(l=!1,e=!1,this.scroller.classList.remove(i),this.translate<=this.dragThreshold?(this.scroller.classList.remove(a),o.apply(this,[300,0])):(this.scroller.classList.remove(c),this.scroller.classList.add(h),o.apply(this,[100,this.dragThreshold]),this.onDragDone()))}var e=!1,l=!1,d=!1,u=0,f=0;this.scroller.addEventListener("touchstart",t.bind(this),!1),this.scroller.addEventListener("touchmove",r.bind(this),!1),this.scroller.addEventListener("touchend",s.bind(this),!1)}},{key:"_initScroll",value:function(){function t(){if(!this.scrollerLoading){var t=this.scroller,r=t.scrollHeight,s=t.scrollTop;r-this.scroller.getBoundingClientRect().height-s<=this.scrollThreshold&&(this.scrollerLoading=!0,this.onScrollToThreshold&&this.onScrollToThreshold())}}this.scroller.addEventListener("scroll",t.bind(this),!1)}}]),t}();Object.assign(d.prototype,{dragLoadingDone:function(){this.scroller.classList.remove(h),o.apply(this,[300,0])},scrollLoadingDone:function(){this.scrollerLoading=!1}}),t.exports=d}])});